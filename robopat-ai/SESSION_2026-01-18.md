# セッション記録 2026-01-18

## 実施内容

### 1. Issue作成
**Issue #2**: [【新機能】自動化設計支援アプリの開発](https://github.com/PLark-droid/Robo-Pat-Create/issues/2)

自動化要件 → 基本設計 → 詳細設計 → 承認 → スクリプト + 手順書出力 のワークフローを持つアプリの開発Issue

### 2. 方式選択
**方式A: CLI対話型** を選択（既存robopat_ai.pyの拡張）

### 3. 実装完了

#### 新規ファイル
- `robopat-ai/src/design_generator.py`
  - `DesignGenerator` クラス
  - 基本設計生成 (`generate_basic_design`)
  - 詳細設計生成 (`generate_detailed_design`)
  - 手順書生成 (`generate_manual`)
  - YAML生成 (`generate_yaml_script`)
  - 対話ウィザード (`run_design_wizard`)

#### 更新ファイル
- `robopat-ai/robopat_ai.py`
  - `design` サブコマンド追加
  - `cmd_design()` 関数追加

## 使い方

```bash
cd /Users/hiroki-matsui/Robo-Pat/Robo-Pat-Create/robopat-ai
python robopat_ai.py design
```

## フロー

```
Step 1: 自動化要件を入力（複数行OK、空行で確定）
        ↓
Step 2: 基本設計を自動生成（AI）
        ↓
Step 3: 基本設計を承認 (Y/N/Q)
        - N: 修正指示を入力して再生成
        ↓
Step 4: 詳細設計を自動生成（AI）
        ↓
Step 5: 詳細設計を承認 (Y/N/Q)
        - N: 修正指示を入力して再生成
        ↓
成果物出力 (./output/):
  - {プロジェクト名}_{日時}.yaml
  - {プロジェクト名}_{日時}_手順書.md
  - {プロジェクト名}_{日時}_設計.json
```

## 追加実装（セッション2）

### .bwnp自動生成オプション
- `design_generator.py` に.bwnp生成オプションを追加
- ウィザード終了時に「テンプレートから.bwnpを生成しますか？」と確認
- テンプレート: `script/SUUMO反響記録ロボット.bwnp`

## 次のステップ（未実施）

1. 実際の業務で動作テスト

2. Issue #2の残タスク
   - [ ] Webアプリ版の検討（将来）
   - [ ] エラーハンドリングの強化
   - [ ] テストケース追加

## 技術メモ

- AIモデル: `claude-sonnet-4-20250514`
- 環境変数: `ANTHROPIC_API_KEY` (.envファイル)
- 依存: `anthropic`, `python-dotenv`, `pyyaml`
